{% extends 'FreifunkLinkSinkBundle::layout.html.twig' %}

{% block css %}
    {% stylesheets filter="compass"
        "@FreifunkLinkSinkBundle/Resources/assets/css/links.scss"
    %}
        <link rel="stylesheet" href="{{ asset_url }}" />
    {% endstylesheets %}
{% endblock %}

{% block javascripts %}
    {% javascripts
    "@FreifunkLinkSinkBundle/Resources/assets/js/links.js"
    %}
    <script src="{{ asset_url }}"></script>
    {% endjavascripts %}
{% endblock %}

{% block body -%}
    {% if app.request.query.get('deletedtitle') !='' %}
    <div class="ui one column page grid">
        <div class="column">
            <div id="mission-statement" class="ui message ">
                Link <strong>{{ app.request.query.get('deletedtitle') }}</strong> gelöscht.
            </div>
        </div>
    </div>
    {% endif %}
    <div class="ui one column page grid title">
        <div class="ui column">
            <h1>
                {% if entities|length == 1 %}1 gefundener Link{% else %}{{ entities|length }} gefundene Links{% endif %}
            </h1>
            <div class="ui two column page grid title">
                <div class="ui column">
                    Benutzte Filter:
                    <ul>
                    {% if category|default(false) %}<li>Kategorie: „{{ category.getName }}“</li>{% endif %}
                    {% if tag|default(false) %}<li>Tag: „{{ tag.name }}“</li>{% endif %}
                    {% if year|default(false) %}<li>Jahr: „{{ year }}“</li>{% endif %}
                    {% if tag|default(false) or year|default(false) or category|default(false) %}
                    </ul>
                </div>
                <div class="ui column">
                    <a href="{{ path('tag_show',{'slug' : tag.slug }) }}.rss"><i class="icon rss"></i>Link zum Feed</a>
                    {% endif %}
                </div>
            </div>

        </div>
    </div>

    <div class="ui four column page grid stackable">
        {% for entity in entities %}
            {{ include('FreifunkLinkSinkBundle:Link:link_box.html.twig',{'truncate_summary':true, 'truncate_description': true}) }}
        {% endfor %}
    </div>

{% endblock %}
